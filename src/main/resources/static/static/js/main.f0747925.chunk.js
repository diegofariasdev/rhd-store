(this["webpackJsonpstore-ui"]=this["webpackJsonpstore-ui"]||[]).push([[0],{232:function(e,t){},234:function(e,t){},245:function(e,t){},247:function(e,t){},274:function(e,t){},276:function(e,t){},277:function(e,t){},282:function(e,t){},284:function(e,t){},303:function(e,t){},315:function(e,t){},318:function(e,t){},324:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(36),c=a.n(i),o=a(211),s=a(4),l=a(5),u=a(13),d=a(14),j=a(18),b=a(17),m=function(){function e(){Object(u.a)(this,e)}return Object(d.a)(e,[{key:"fetchUrl",value:function(e,t,a,n){fetch(e,t).then((function(e){var t=e.json();return e.ok?t:t.then((function(t){throw t.status=e.status,t}))})).then((function(e){a(e)}),(function(e){403===e.status?window.location="/#/403":404===e.status&&(window.location="/#/404"),n(e)}))}}]),e}(),h=new(function(){function e(){return Object(u.a)(this,e),e.instance||(this.token=JSON.parse(localStorage.getItem("currentToken")),null==this.token?(this.token={},this.claims={}):this.loadToken(),e.instance=this),e.instance}return Object(d.a)(e,[{key:"loadToken",value:function(){var e=atob(this.token.access_token.split(".")[1]),t=JSON.parse(e);null==this.claims&&(this.claims={}),this.claims.exp=t.exp,this.claims.sub=t.sub,this.claims.roles=t.roles}},{key:"setToken",value:function(e){localStorage.setItem("currentToken",JSON.stringify(e)),this.token.access_token=e.access_token,this.loadToken()}},{key:"logout",value:function(){this.claims.exp=null,this.claims.sub=null,this.claims.roles=null,this.token.access_token=null,localStorage.removeItem("currentToken")}},{key:"isLoggedIn",value:function(){var e="undefined"!=typeof this.token.access_token&&null!=this.token.access_token,t="undefined"==typeof this.claims.exp||null==this.claims.exp||this.claims.exp<=Math.round(new Date/1e3);return t&&this.logout(),e&&!t}},{key:"getUsername",value:function(){return this.claims.sub}},{key:"isAdmin",value:function(){return"undefined"!=typeof this.claims.roles&&null!=this.claims.roles&&"admin"===this.claims.roles}}]),e}());Object.freeze(h);var p=h,O=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).profileModel=p,e}return Object(d.a)(a,[{key:"fetchItemsPage",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{orderBy:"desc(price)",pageSize:8,pageNumber:0},n=new URL("/items",window.location.origin);n.searchParams.append("orderBy",a.orderBy?a.orderBy:"desc(price)"),n.searchParams.append("pageSize",a.pageSize?a.pageSize:8),n.searchParams.append("pageNumber",a.pageNumber?a.pageNumber:0),this.fetchUrl(n,null,e,t)}},{key:"fetchItemsPageByName",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{orderBy:"desc(price)",pageSize:8,pageNumber:0},r=new URL("/items",window.location.origin);r.searchParams.append("search",a||""),r.searchParams.append("orderBy",n.orderBy?n.orderBy:"desc(price)"),r.searchParams.append("pageSize",n.pageSize?n.pageSize:8),r.searchParams.append("pageNumber",n.pageNumber?n.pageNumber:0),this.fetchUrl(r,null,e,t)}},{key:"fetchItemByCode",value:function(e,t,a){var n=new URL("/items/"+a,window.location.origin);this.fetchUrl(n,{headers:{Authorization:"Bearer "+this.profileModel.token.access_token}},e,t)}},{key:"updateItem",value:function(e,t,a){var n=new URL("/items",window.location.origin);this.fetchUrl(n,{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.profileModel.token.access_token},body:JSON.stringify({code:a.code,description:a.description,price:a.price,pictureUrl:a.pictureurl})},e,t)}},{key:"saveItem",value:function(e,t,a){var n=new URL("/items",window.location.origin);this.fetchUrl(n,{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.profileModel.token.access_token},body:JSON.stringify([{name:a.name,category:a.category,description:a.description,price:a.price,pictureUrl:a.pictureurl}])},e,t)}}]),a}(m),f=a(20),g=a(381),x=a(31),v=a(128),y=a(349),S=a(329),w=a(385),k=a(382),C=a(328),z=a(352),U=a(353),P=a(354),I=a(355),N=a(356),T=a(357),B=a(358),E=new(function(){function e(){return Object(u.a)(this,e),e.instance||(this.items=JSON.parse(localStorage.getItem("currentCart")),null==this.items&&(this.items=[]),e.instance=this),e.instance}return Object(d.a)(e,[{key:"addItem",value:function(e){var t=this.items.find((function(t){return t.code===e.code}));null!=t?t.quantity++:(e.quantity=1,this.items.push(e)),localStorage.setItem("currentCart",JSON.stringify(this.items))}},{key:"removeItem",value:function(e){var t=this.items.findIndex((function(t){return t.code===e.code}));-1!==t&&(this.items[t].quantity--,this.items[t].quantity<1&&this.items.splice(t,1)),localStorage.setItem("currentCart",JSON.stringify(this.items))}},{key:"removeAllItems",value:function(){this.items.length=0,localStorage.removeItem("currentCart")}},{key:"isEmpty",value:function(){return this.items.length<=0}},{key:"getTotal",value:function(){var e=0;return this.items.forEach((function(t){return e+=t.price*t.quantity})),e}}]),e}());Object.freeze(E);var L=E,M=a(2);var A=function(e){var t=L,a=p;return Object(M.jsxs)(x.a,{tag:"header",direction:"row",align:"center",justify:"between",background:"brand",pad:{left:"medium",right:"small",vertical:"small"},elevation:"medium",style:{zIndex:"1"},children:[e.showSearch&&Object(M.jsx)(x.a,{width:"medium",pad:"small",children:Object(M.jsx)(y.a,{onEnter:function(t){e.onSearchEnter&&e.onSearchEnter(t.target.value)},children:Object(M.jsx)(S.a,{icon:Object(M.jsx)(U.a,{}),reverse:!0,placeholder:"Search for your puzzle!"})})}),Object(M.jsxs)(w.a,{level:"3",margin:"none",children:[Object(M.jsx)(k.a,{label:"Superstore",href:"/"})," | ",e.title]}),Object(M.jsxs)(x.a,{direction:"row",children:[!a.isAdmin()&&Object(M.jsx)(C.a,{icon:Object(M.jsx)(P.a,{color:t.isEmpty()?"":"accent-1"}),href:"#/cart"}),a.isAdmin()&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(z.a,{content:"Admin Users",children:Object(M.jsx)(C.a,{icon:Object(M.jsx)(I.a,{}),href:"#/adminusers"})}),Object(M.jsx)(z.a,{content:"Admin Orders",children:Object(M.jsx)(C.a,{icon:Object(M.jsx)(N.a,{}),href:"#/adminorders"})}),Object(M.jsx)(z.a,{content:"Admin Items",children:Object(M.jsx)(C.a,{icon:Object(M.jsx)(T.a,{}),href:"#/adminitems"})})]}),Object(M.jsx)(C.a,{icon:Object(M.jsx)(B.a,{color:a.isLoggedIn()?"accent-1":""}),href:"#/profile"})]})]})};var q=function(e){return Object(M.jsx)(g.a,{theme:{global:{colors:{brand:"#228BE6"},font:{family:"Roboto",size:"18px",height:"20px"}}},full:!0,children:Object(M.jsxs)(x.a,{fill:!0,children:[Object(M.jsx)(A,Object(f.a)({},e)),Object(M.jsx)(x.a,{flex:!0,overflow:"auto",direction:"column",pad:"medium",children:e.children}),Object(M.jsx)(x.a,{direction:"row",background:"brand",pad:"medium",justify:"between",children:Object(M.jsx)(v.a,{children:"RHD Application Test by Diego Far\xedas"})})]})})},D=a(360),R=a(361),F=a(386),H=a(387),_=a(388),J=a(38);var $=function(e){var t=e.data;return Object(M.jsxs)(D.a,{elevation:"large",width:"small",children:[Object(M.jsx)(R.a,{height:"medium",onClick:function(){return e.onCardClick(t)},children:Object(M.jsx)(F.a,{fit:"cover",src:"data:image/jpeg;base64, "+t.picture})}),Object(M.jsxs)(x.a,{pad:{horizontal:"small"},responsive:!1,onClick:function(){return e.onCardClick(t)},children:[Object(M.jsx)(H.a,{margin:{top:"none"},children:t.name}),Object(M.jsx)(w.a,{level:"4",margin:"small",children:Object(M.jsx)(J.a,{displayType:"text",prefix:"USD $",decimalScale:2,fixedDecimalScale:!0,value:t.price})})]}),Object(M.jsx)(_.a,{pad:"small",justify:"center",children:Object(M.jsx)(C.a,{icon:Object(M.jsx)(P.a,{}),label:"Add to Cart",hoverIndicator:!0,size:"small",onClick:function(){return e.onAddToCartClick(t)}})})]})},Y=a(380),Q=a(383),G=a(364),W=a(379),K=a(57);var V=function(){var e=Object(n.useState)(null),t=Object(l.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),c=Object(l.a)(i,2),o=c[0],s=c[1],u=Object(n.useState)("5"),d=Object(l.a)(u,2),j=d[0],b=d[1],m=Object(n.useState)(1),h=Object(l.a)(m,2),p=h[0],f=h[1],g=Object(n.useState)([]),x=Object(l.a)(g,2),y=x[0],S=x[1],w=function(){var e=Object(n.useState)(0),t=Object(l.a)(e,2)[1];return function(){return t((function(e){return e+1}))}}(),k=Object(n.useMemo)((function(){return new O}),[]),C=L,z=Object(n.useRef)(),U=Object(n.useCallback)((function(e){z.current=e,s(!1),S([]),k.fetchItemsPageByName((function(e){S(e),s(!0)}),(function(e){r(e),s(!0)}),e,{orderBy:"desc(price)",pageSize:j,pageNumber:p-1})}),[k,p,j]);return Object(n.useEffect)((function(){U(z.current)}),[U]),Object(M.jsxs)(q,{title:"Recommendations",showSearch:!0,onSearchEnter:U,children:[Object(M.jsxs)(K.a,{margin:{bottom:"small"},children:[Object(M.jsx)(v.a,{children:"Products per page"}),Object(M.jsx)(Y.a,{options:["5","10","15"],value:j,onChange:function(e){var t=e.option;f(1),b(t)}})]}),Object(M.jsxs)(Q.a,{gap:"medium",rows:"medium",columns:{count:"fit",size:"small"},fill:"horizontal",children:[a&&Object(M.jsxs)("div",{children:["Error: ",a.message]}),!o&&Object(M.jsx)(G.a,{}),o&&!a&&y.content.map((function(e){return Object(M.jsx)($,{onCardClick:function(){},onAddToCartClick:function(){C.addItem(e),w()},data:e},e.code)}))]}),o&&!a&&Object(M.jsx)(W.a,{margin:{vertical:"2em",horizontal:"auto"},pad:"medium",numberItems:y.totalElements,onChange:function(e){var t=e.page;f(t)},step:y.size,page:y.pageable.pageNumber+1})]})},X=a(34),Z=a(371),ee=a(378);var te=function(e){var t=[{property:"picture",size:"xsmall",render:function(e){return Object(M.jsx)(F.a,{fit:"cover",size:"small",src:"data:image/jpeg;base64, "+e.picture})}},{property:"name",primary:!0,header:"Name"},{property:"price",header:"Price",render:function(e){return Object(M.jsx)(J.a,{displayType:"text",prefix:"USD $",decimalScale:2,fixedDecimalScale:!0,value:e.price})}},{property:"quantity",header:"Quantity",render:function(t){return e.disabled?Object(M.jsx)(v.a,{children:e.quantity[t.code]}):Object(M.jsx)(K.b,{value:e.quantity[t.code],min:0,onChange:function(a){e.onQuantityChange(a,t.code)}},t.code)}}];return Object(M.jsx)(ee.a,{sortable:!0,size:"medium",columns:t,data:e.data})};var ae=function(){var e=Object(s.g)(),t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)([]),o=Object(l.a)(c,2),u=o[0],d=o[1],j=L,b=p;return Object(n.useEffect)((function(){var e=[];j.items.forEach((function(t){return e[t.code]=t.quantity})),i(j.items),d(e)}),[j.items]),Object(M.jsx)(q,{title:"Your Order",children:Object(M.jsxs)(x.a,{align:"center",children:[Object(M.jsxs)(Q.a,{rows:["xxsmall"],columns:["medium","small"],gap:"small",pad:{bottom:"medium"},areas:[{name:"total",start:[0,0],end:[0,0]},{name:"proceed",start:[1,0],end:[1,0]}],children:[Object(M.jsx)(x.a,{gridArea:"total",children:Object(M.jsxs)(H.a,{margin:{right:"5em"},children:[j.isEmpty()&&"Your cart is empty",!j.isEmpty()&&Object(M.jsx)(J.a,{displayType:"text",prefix:"Your total is: USD $",decimalScale:2,fixedDecimalScale:!0,value:j.getTotal()})]})}),Object(M.jsx)(x.a,{gridArea:"proceed",children:!j.isEmpty()&&Object(M.jsx)(C.a,{icon:Object(M.jsx)(Z.a,{}),primary:!0,label:"Proceed to Checkout",size:"small",onClick:function(){b.isLoggedIn()?e.push("/checkout"):e.push("/login?from=cart")}})})]}),Object(M.jsx)(te,{data:r,quantity:u,onQuantityChange:function(e,t){var a=parseInt(e.target.value),n=[],c=r.find((function(e){return e.code===t}));a>u[t]&&j.addItem(c),a<u[t]&&j.removeItem(c);var o=Object(X.a)(j.items);o.forEach((function(e){return n[e.code]=e.quantity})),i(o),d(n)}})]})})},ne=a(372),re=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).profileModel=p,e}return Object(d.a)(a,[{key:"fetchOrdersByUsername",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{sortBy:"desc(creationTimestamp)",pageSize:8,pageNumber:0},r=new URL("/orders/client/"+a,window.location.origin);r.searchParams.append("sortBy",n.sortBy?n.sortBy:"desc(creationTimestamp)"),r.searchParams.append("pageSize",n.pageSize?n.pageSize:8),r.searchParams.append("pageNumber",n.pageNumber?n.pageNumber:0),this.profileModel.isLoggedIn()?this.fetchUrl(r,{headers:{Authorization:"Bearer "+this.profileModel.token.access_token}},e,t):t({error:"uilogout",message:"user logged out"})}},{key:"createOrder",value:function(e,t,a){var n=new URL("/orders",window.location.origin);this.profileModel.isLoggedIn()?this.fetchUrl(n,{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.profileModel.token.access_token},body:JSON.stringify(a)},e,t):t({error:"uilogout",message:"user logged out"})}},{key:"fetchOrders",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{sortBy:"desc(creationTimestamp)",pageSize:5,pageNumber:0},n=new URL("/orders",window.location.origin);n.searchParams.append("sortBy",a.sortBy?a.sortBy:"desc(creationTimestamp)"),n.searchParams.append("pageSize",a.pageSize?a.pageSize:8),n.searchParams.append("pageNumber",a.pageNumber?a.pageNumber:0),this.profileModel.isLoggedIn()?this.fetchUrl(n,{headers:{Authorization:"Bearer "+this.profileModel.token.access_token}},e,t):t({error:"uilogout",message:"user logged out"})}},{key:"fetchOrder",value:function(e,t,a){var n=new URL("/orders/"+a,window.location.origin);this.fetchUrl(n,{headers:{Authorization:"Bearer "+this.profileModel.token.access_token}},e,t)}},{key:"updateOrder",value:function(e,t,a){var n=new URL("/orders",window.location.origin);this.fetchUrl(n,{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.profileModel.token.access_token},body:JSON.stringify(a)},e,t)}}]),a}(m);var ie=function(){var e=Object(s.g)(),t=Object(n.useState)([]),a=Object(l.a)(t,2),r=a[0],i=a[1],c=["Subtotal","Shipping","Total"],o=L,u=p,d=new re;Object(n.useEffect)((function(){var e=Object(X.a)(o.items);e.push({name:"Subtotal",price:o.getTotal(),quantity:1}),e.push({name:"Shipping",price:.01,quantity:1}),e.push({name:"Total",price:o.getTotal()+.01,quantity:1}),i(e)}),[o]);var j=[{property:"name",header:"Product",render:function(e){return c.includes(e.name)?e.name:e.name+" | [x"+e.quantity+"]"}},{property:"subtotal",header:"Subtotal",render:function(e){return Object(M.jsx)(J.a,{displayType:"text",prefix:"USD $",decimalScale:2,fixedDecimalScale:!0,value:e.price*e.quantity})}}];return Object(M.jsx)(q,{title:"Your Order",children:Object(M.jsxs)(x.a,{direction:"column",children:[Object(M.jsx)(ee.a,{sortable:!0,size:"medium",columns:j,data:r}),Object(M.jsx)(C.a,{icon:Object(M.jsx)(ne.a,{}),primary:!0,label:"Place order",size:"small",onClick:function(){var t={orderItems:[]};o.items.forEach((function(e){t.orderItems.push({item:{code:e.code},quantity:e.quantity})})),d.createOrder((function(){e.push("/profile"),o.removeAllItems()}),(function(t){"uilogout"===t.details[0]&&(u.logout(),e.push("/login?logoutreason=tokenexpired"))}),t)}})]})})};var ce=function(){var e=Object(s.g)(),t=Object(n.useState)(!0),a=Object(l.a)(t,2),r=a[0],i=a[1],c=Object(n.useState)(!1),o=Object(l.a)(c,2),u=o[0],d=o[1],j=Object(n.useState)([]),b=Object(l.a)(j,2),m=b[0],h=b[1],O=Object(n.useMemo)((function(){return new re}),[]),f=p;return Object(n.useEffect)((function(){f.isLoggedIn()?(d(!0),f.isAdmin()||O.fetchOrdersByUsername((function(e){h(e.content)}),(function(t){"uilogout"===t.details[0]&&(f.logout(),e.push("/login?logoutreason=tokenexpired"))}),f.getUsername())):d(!1),i(!1)}),[e,O,f]),Object(M.jsxs)(q,{title:"Profile",children:[r&&Object(M.jsx)("div",{children:"Loading..."}),!r&&!u&&Object(M.jsx)(s.a,{to:"/login"}),!r&&u&&Object(M.jsxs)(x.a,{direction:"column",width:"large",fill:"horizontal",children:[!f.isAdmin()&&Object(M.jsxs)(M.Fragment,{children:[Object(M.jsx)(w.a,{level:3,children:"Orders"}),Object(M.jsx)(ee.a,{margin:{top:"15px"},size:"small",columns:[{property:"code",header:"Code",size:"small",render:function(e){return e.code.substr(0,7)}},{property:"creationTimestamp",header:"Date",render:function(e){return e.creationTimestamp.substr(0,10)}},{property:"productsCount",header:"Products",render:function(e){var t=0;return e.orderItems.forEach((function(e){return t+=e.quantity})),t}},{property:"total",header:"Total"},{property:"status",header:"Status",render:function(e){return e.orderLog[e.orderLog.length-1].status}}],data:m})]}),Object(M.jsxs)(w.a,{level:3,children:["User Info (",f.getUsername(),")"]}),Object(M.jsx)(C.a,{primary:!0,type:"submit",label:"Logout",color:"accent-4",onClick:function(){f.logout(),e.push("/")}})]})]})},oe=a(373),se=a(362),le=a(90),ue=a.n(le),de=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).profileModel=p,e}return Object(d.a)(a,[{key:"login",value:function(e,t,a,n){var r=new URL("/users/login",window.location.origin),i={username:a,password:ue()(n).toString()};this.fetchUrl(r,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e,t)}},{key:"signUp",value:function(e,t,a,n){var r=new URL("/users",window.location.origin),i={username:a,password:ue()(n).toString()};this.fetchUrl(r,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)},e,t)}},{key:"fetchUsers",value:function(e,t,a,n,r){var i=new URL("/users",window.location.origin);i.searchParams.append("profile",a||""),i.searchParams.append("enable",n||""),i.searchParams.append("orderBy",r.orderBy?r.orderBy:"desc(creationTimestamp)"),i.searchParams.append("pageSize",r.pageSize?r.pageSize:5),i.searchParams.append("pageNumber",r.pageNumber?r.pageNumber:0),this.profileModel.isLoggedIn()?this.fetchUrl(i,{headers:{Authorization:"Bearer "+this.profileModel.token.access_token}},e,t):t({error:"uilogout",message:"user logged out"})}},{key:"fetchUser",value:function(e,t,a){var n=new URL("/users/"+a,window.location.origin);this.profileModel.isLoggedIn()?this.fetchUrl(n,{headers:{Authorization:"Bearer "+this.profileModel.token.access_token}},e,t):t({error:"uilogout",message:"user logged out"})}},{key:"updateUser",value:function(e,t,a){var n=new URL("/users",window.location.origin);a.password=ue()(a.password).toString(),this.profileModel.isLoggedIn()?this.fetchUrl(n,{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+this.profileModel.token.access_token},body:JSON.stringify(a)},e,t):t({error:"uilogout",message:"user logged out"})}}]),a}(m);var je=function(){var e=p,t=new de,a=Object(s.g)(),r=new URLSearchParams(Object(s.h)().search),i=Object(n.useState)(null),c=Object(l.a)(i,2),o=c[0],u=c[1],d=Object(n.useState)(null),j=Object(l.a)(d,2),b=j[0],m=j[1],h=Object(n.useState)(null),O=Object(l.a)(h,2),f=O[0],g=O[1],v=function(n){var i=n.value;u(null),m(null),t.login((function(t){e.setToken(t),"cart"===r.get("from")?a.push("/cart"):e.isAdmin()?a.push("/adminorders"):a.push("/")}),(function(e){"Username not found"===e.details[0]&&u("Username not found"),"Bad credentials"===e.details[0]&&m("Incorrect username and/or password"),"User is disabled"===e.details[0]&&u("Too many failed attempts")}),i.username,i.password)};return Object(M.jsxs)(q,{title:"Login",children:[Object(M.jsxs)(x.a,{fill:"horizontal",pad:{horizontal:"10em"},children:[Object(M.jsx)(w.a,{level:2,children:"Please login"}),Object(M.jsxs)(oe.a,{onSubmit:v,children:[Object(M.jsx)(se.a,{name:"username",htmlFor:"username-id",label:"Username",error:o,children:Object(M.jsx)(S.a,{id:"username-id",name:"username"})}),Object(M.jsx)(se.a,{name:"password",htmlFor:"password-id",label:"Password",error:b,children:Object(M.jsx)(S.a,{id:"password-id",name:"password",type:"password"})}),Object(M.jsx)(x.a,{pad:{horizontal:"large"},children:Object(M.jsx)(C.a,{primary:!0,type:"submit",label:"Login"})})]})]}),Object(M.jsxs)(x.a,{fill:"horizontal",pad:{horizontal:"10em"},margin:{top:"18em",bottom:"22em"},children:[Object(M.jsx)(w.a,{level:3,children:"... Or sign up if you're new"}),Object(M.jsxs)(oe.a,{onSubmit:function(e){var a=e.value;t.signUp((function(){v({value:a})}),(function(){g("Unexpected error while creating user")}),a.username,a.password)},children:[Object(M.jsx)(se.a,{name:"username",htmlFor:"username-su-id",label:"Username",validate:function(e,t){if("undefined"==typeof t.username||""===t.username)return"Username is missing"},error:f,children:Object(M.jsx)(S.a,{id:"username-su-id",name:"username"})}),Object(M.jsx)(se.a,{name:"password",htmlFor:"password-su-id",label:"Password",children:Object(M.jsx)(S.a,{id:"password-su-id",name:"password",type:"password"})}),Object(M.jsx)(se.a,{name:"passwordConf",htmlFor:"password-su-conf-id",label:"Confirm Password",validate:function(e,t){if(t.passwordConf!==t.password)return"Password and Confirm Password mismatch"},children:Object(M.jsx)(S.a,{id:"password-su-conf-id",name:"passwordConf",type:"password"})}),Object(M.jsx)(x.a,{pad:{horizontal:"large"},children:Object(M.jsx)(C.a,{type:"submit",label:"Sign Up"})})]})]})]})},be=a(91),me=a(365),he=a(368),pe=a(366),Oe=a(370),fe=a(367),ge=a(369),xe=a(374),ve=a(375);var ye=function(e){var t=e.columns,a=e.data,r=e.fetchData,i=e.loading,c=e.pageCount,o=Object(be.useTable)({columns:t,data:a,initialState:{pageIndex:0,pageSize:5},manualPagination:!0,manualSortBy:!0,autoResetPage:!1,autoResetSortBy:!1,pageCount:c},be.useSortBy,be.usePagination),s=o.getTableProps,l=o.getTableBodyProps,u=o.headerGroups,d=o.prepareRow,j=o.page,b=o.canPreviousPage,m=o.canNextPage,h=o.pageOptions,p=o.pageCount,O=o.gotoPage,g=o.nextPage,x=o.previousPage,v=o.setPageSize,y=o.state,S=y.pageIndex,w=y.pageSize,k=y.sortBy;return Object(n.useEffect)((function(){r({pageIndex:S,pageSize:w,sortBy:k})}),[r,S,w,k]),Object(M.jsxs)(M.Fragment,{children:[Object(M.jsxs)(me.a,Object(f.a)(Object(f.a)({},s()),{},{children:[Object(M.jsx)(he.a,{children:u.map((function(e){return Object(M.jsx)(pe.a,Object(f.a)(Object(f.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(M.jsx)(Oe.a,Object(f.a)(Object(f.a)({},e.getHeaderProps()),{},{children:Object(M.jsxs)("span",Object(f.a)(Object(f.a)({},e.getSortByToggleProps()),{},{children:[e.render("Header"),e.isSorted?e.isSortedDesc?Object(M.jsx)(xe.a,{}):Object(M.jsx)(ve.a,{}):""]}))}))}))}))}))}),Object(M.jsx)(fe.a,Object(f.a)(Object(f.a)({},l()),{},{children:j.map((function(e,t){return d(e),Object(M.jsx)(pe.a,Object(f.a)(Object(f.a)({},e.getRowProps()),{},{children:e.cells.map((function(e){return Object(M.jsx)(Oe.a,Object(f.a)(Object(f.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))})),Object(M.jsx)(ge.a,{children:Object(M.jsx)(pe.a,{children:i?Object(M.jsx)(Oe.a,{colSpan:"10000",children:"Loading..."}):Object(M.jsxs)(Oe.a,{colSpan:"10000",children:["Showing ",j.length," of ~",c*w," ","results"]})})})]})),Object(M.jsxs)("div",{className:"pagination",children:[Object(M.jsx)("button",{onClick:function(){return O(0)},disabled:!b,children:"<<"})," ",Object(M.jsx)("button",{onClick:function(){return x()},disabled:!b,children:"<"})," ",Object(M.jsx)("button",{onClick:function(){return g()},disabled:!m,children:">"})," ",Object(M.jsx)("button",{onClick:function(){return O(p-1)},disabled:!m,children:">>"})," ",Object(M.jsxs)("span",{children:["Page"," ",Object(M.jsxs)("strong",{children:[S+1," of ",h.length]})," "]}),Object(M.jsxs)("span",{children:["| Go to page:"," ",Object(M.jsx)("input",{type:"number",defaultValue:S+1,onChange:function(e){var t=e.target.value?Number(e.target.value)-1:0;O(t)},style:{width:"100px"}})]})," ",Object(M.jsx)("select",{value:w,onChange:function(e){v(Number(e.target.value))},children:[5,10,15].map((function(e){return Object(M.jsxs)("option",{value:e,children:["Show ",e]},e)}))})]})]})},Se=a(376);var we=function(){var e=Object(s.g)(),t=p,a=Object(n.useState)([]),r=Object(l.a)(a,2),i=r[0],c=r[1],o=Object(n.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(n.useState)(0),m=Object(l.a)(b,2),h=m[0],O=m[1],f=Object(n.useMemo)((function(){return new de}),[]),g=Object(n.useMemo)((function(){return[{Header:"Username",accessor:"username",Cell:function(e){var t=e.row;return"admin"===t.original.profile?Object(M.jsx)(v.a,{children:t.original.username}):Object(M.jsx)(k.a,{href:"/#/adminusers/"+t.original.username,label:t.original.username})}},{Header:"Profile",accessor:"profile",Cell:function(e){var t=e.value;return Object(M.jsxs)(v.a,{children:[t," ","admin"===t?Object(M.jsx)(Se.a,{size:"small"}):Object(M.jsx)(M.Fragment,{})," "]})}},{Header:"Enabled",accessor:"enabled",Cell:function(e){var t=e.value;return Object(M.jsx)(v.a,{color:t?"dark-1":"status-disabled",children:t?"Enabled":"Disabled"})}},{Header:"Creation Date",accessor:"creationTimestamp",Cell:function(e){var t=e.value;return Object(M.jsx)(M.Fragment,{children:t.substr(0,10)})}}]}),[]),x=Object(n.useCallback)((function(a){var n=a.pageSize,r=a.pageIndex,i=a.sortBy;j(!0);var o="desc(creationTimestamp)";i.length>0&&(o=(i[0].desc?"desc":"asc")+"("+i[0].id+")");f.fetchUsers((function(e){c(e.content),O(e.totalPages),j(!1)}),(function(a){"uilogout"===a.error&&(t.logout(),e.push("/login?logoutreason=tokenexpired"))}),null,null,{pageSize:n,pageNumber:r,orderBy:o})}),[e,t,f]);return Object(M.jsxs)(q,{title:"Admin Users",children:[Object(M.jsx)(w.a,{level:2,children:"Users"}),Object(M.jsx)(ye,{columns:g,data:i,onSort:x,fetchData:x,loading:d,pageCount:h})]})};var ke=function(e){var t=new Date;t.setDate(t.getDate()-365);var a={status:"null",creationTimestamp:t.toString()};return e.forEach((function(e){var t=new Date(e.creationTimestamp),n=new Date(a.creationTimestamp);t.getTime()>n.getTime()&&(a=e)})),"null"===a.status?null:a};var Ce=function(){var e=Object(s.g)(),t=p,a=Object(n.useState)([]),r=Object(l.a)(a,2),i=r[0],c=r[1],o=Object(n.useState)(!1),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(n.useState)(0),m=Object(l.a)(b,2),h=m[0],O=m[1],f=Object(n.useMemo)((function(){return new re}),[]),g=Object(n.useMemo)((function(){return[{Header:"Code",accessor:"code",Cell:function(e){var t=e.value;return Object(M.jsx)(k.a,{href:"/#/adminorders/"+t,label:t})}},{Header:"User",accessor:"user.username"},{Header:"Total",accessor:"total"},{Header:"Total Products",accessor:"orderItems",Cell:function(e){var t=e.value;return Object(M.jsx)(v.a,{children:t.reduce((function(e,t){return+e+ +t.quantity}),0)})}},{Header:"Status",accessor:"orderLog",Cell:function(e){var t=e.value;return Object(M.jsx)(v.a,{children:ke(t).status})}}]}),[]),x=Object(n.useCallback)((function(a){var n=a.pageSize,r=a.pageIndex,i=a.sortBy;j(!0);var o="desc(creationTimestamp)";i.length>0&&(o=(i[0].desc?"desc":"asc")+"("+i[0].id+")");f.fetchOrders((function(e){c(e.content),O(e.totalPages),j(!1)}),(function(a){"uilogout"===a.error&&(t.logout(),e.push("/login?logoutreason=tokenexpired"))}),{pageSize:n,pageNumber:r,orderBy:o})}),[e,t,f]);return Object(M.jsxs)(q,{title:"Admin Orders",children:[Object(M.jsx)(w.a,{level:2,children:"Orders"}),Object(M.jsx)(ye,{columns:g,data:i,onSort:x,fetchData:x,loading:d,pageCount:h})]})};var ze=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],r=t[1],i=Object(n.useState)(!1),c=Object(l.a)(i,2),o=c[0],s=c[1],u=Object(n.useState)(0),d=Object(l.a)(u,2),j=d[0],b=d[1],m=Object(n.useMemo)((function(){return new O}),[]),h=Object(n.useMemo)((function(){return[{Header:"Code",accessor:"code",Cell:function(e){var t=e.value;return Object(M.jsx)(k.a,{href:"/#/adminitems/"+t,label:t})}},{Header:"Name",accessor:"name"},{Header:"Category",accessor:"category"},{Header:"Price",accessor:"price",Cell:function(e){var t=e.value;return Object(M.jsx)(J.a,{displayType:"text",prefix:"USD $",decimalScale:2,fixedDecimalScale:!0,value:t})}},{Header:"Creation Date",accessor:"creationTimestamp",Cell:function(e){var t=e.value;return Object(M.jsx)(M.Fragment,{children:t.substr(0,10)})}}]}),[]),p=Object(n.useCallback)((function(e){var t=e.pageSize,a=e.pageIndex,n=e.sortBy;s(!0);var i="desc(creationTimestamp)";n.length>0&&(i=(n[0].desc?"desc":"asc")+"("+n[0].id+")");m.fetchItemsPage((function(e){r(e.content),b(e.totalPages),s(!1)}),(function(e){}),{pageSize:t,pageNumber:a,orderBy:i})}),[m]);return Object(M.jsxs)(q,{title:"Admin Items",children:[Object(M.jsx)(w.a,{level:2,children:"Items"}),Object(M.jsx)(x.a,{direction:"row-responsive",margin:{bottom:"2em"},children:Object(M.jsx)(K.a,{children:Object(M.jsx)(C.a,{primary:!0,label:"New",href:"#/adminitems/new"})})}),Object(M.jsx)(ye,{columns:h,data:a,onSort:p,fetchData:p,loading:o,pageCount:j})]})},Ue=a(327);var Pe=function(){var e=Object(s.i)().username,t=Object(s.g)(),a=p,r=Object(n.useState)({username:"loading..."}),i=Object(l.a)(r,2),c=i[0],o=i[1],u=Object(n.useMemo)((function(){return new de}),[]);return Object(n.useEffect)((function(){u.fetchUser((function(e){o(e)}),(function(e){"uilogout"===e.error&&(a.logout(),t.push("/login?logoutreason=tokenexpired"))}),e)}),[u,e,a,t]),Object(M.jsxs)(q,{title:"Edit User",children:[Object(M.jsxs)(w.a,{level:2,children:["Editing user '",e,"'"]}),Object(M.jsxs)(oe.a,{value:c,onChange:function(e){return o(e)},onSubmit:function(e){var n,r=e.value;n=r,u.updateUser((function(){t.push("/adminusers")}),(function(e){"uilogout"===e.error&&(a.logout(),t.push("/login?logoutreason=tokenexpired"))}),n)},children:[Object(M.jsx)(se.a,{name:"username",htmlFor:"username-id",label:"Username",children:Object(M.jsx)(S.a,{disabled:!0,id:"username-id",name:"username"})}),Object(M.jsx)(se.a,{name:"profile",htmlFor:"profile-id",label:"Profile",children:Object(M.jsx)(Ue.a,{id:"profile-id",name:"profile",options:["admin","client"]})}),Object(M.jsx)(se.a,{name:"enabled",htmlFor:"enabled-id",label:"Enabled",children:Object(M.jsx)(Ue.a,{id:"enabled-id",name:"enabled",options:[!0,!1]})}),Object(M.jsx)(se.a,{name:"password",htmlFor:"password-id",label:"New Password",children:Object(M.jsx)(S.a,{id:"password-id",name:"password"})}),Object(M.jsx)(x.a,{pad:{horizontal:"large"},children:Object(M.jsx)(C.a,{primary:!0,type:"submit",label:"Save"})})]})]})},Ie=a(330);var Ne=function(){var e=Object(s.i)().ordercode,t=Object(s.g)(),a=Object(n.useState)(""),r=Object(l.a)(a,2),i=r[0],c=r[1],o=Object(n.useState)([]),u=Object(l.a)(o,2),d=u[0],j=u[1],b=Object(n.useState)(!1),m=Object(l.a)(b,2),h=m[0],O=m[1],g=Object(n.useState)([{code:"abc",picture:null,name:null,price:null,quantity:null}]),x=Object(l.a)(g,2),v=x[0],y=x[1],k=Object(n.useState)({abc:0}),z=Object(l.a)(k,2),U=z[0],P=z[1],I=Object(n.useMemo)((function(){return new re}),[]),N=p;return Object(n.useEffect)((function(){var a=[];I.fetchOrder((function(e){var t=[],n=[];e.orderItems.forEach((function(e){var n=Object(f.a)({},e.item);n.quantity=e.quantity,t.push(n),a[e.item.code]=e.quantity})),e.orderLog.forEach((function(e){n.push(e.status)})),O(n.length>1),c(e.user.username),j(n),y(t),P(a)}),(function(e){"uilogout"===e.error&&(N.logout(),t.push("/login?logoutreason=tokenexpired"))}),e)}),[t,I,e,N]),Object(M.jsxs)(q,{title:"Edit Order",children:[Object(M.jsxs)(w.a,{level:2,children:[" Editing order '",e,"'"]}),Object(M.jsxs)(oe.a,{children:[Object(M.jsx)(se.a,{name:"username",htmlFor:"username-id",label:"Username",children:Object(M.jsx)(S.a,{disabled:!0,id:"username-id",name:"username",value:i})}),Object(M.jsx)(se.a,{name:"status",htmlFor:"status-id",label:"Status",children:Object(M.jsx)(Ie.a,{id:"status-id",disabled:h,name:"status",valueKey:"name",options:[{label:"Placed",name:"placed",disabled:!0},{label:"Cancelled",name:"admin-cancelled"},{label:"Completed",name:"completed"}],value:d,onChange:function(e){var t=e.value,a=e.option;"completed"===a.name&&j(t.filter((function(e){return"admin-cancelled"!==e}))),"admin-cancelled"===a.name&&j(t.filter((function(e){return"completed"!==e})))}})}),Object(M.jsx)(se.a,{label:"Order Items",disabled:h,children:Object(M.jsx)(te,{data:v,quantity:U,onQuantityChange:function(e,t){var a=parseInt(e.target.value),n={},r=v.find((function(e){return e.code===t}));a>U[t]&&r.quantity++,a<U[t]&&r.quantity--;var i=Object(X.a)(v);i.forEach((function(e){return n[e.code]=e.quantity})),y(i),P(n)},disabled:h})}),Object(M.jsx)(C.a,{primary:!0,label:h?"Return":"Save",onClick:function(){var a={user:{username:i},code:e,orderItems:[],orderLog:[]};v.forEach((function(e){e.quantity>0&&a.orderItems.push({item:{code:e.code},quantity:e.quantity})})),d.forEach((function(e){return a.orderLog.push({status:e})})),I.updateOrder((function(){t.push("/adminorders")}),(function(e){"uilogout"===e.error&&(N.logout(),t.push("/login?logoutreason=tokenexpired"))}),a)}})]})]})},Te=a(384);var Be=function(e){return Object(M.jsxs)(oe.a,{value:e.data,onChange:e.onChange,onSubmit:function(t){var a=t.value;e.onSubmit(a)},children:[Object(M.jsx)(se.a,{name:"name",htmlFor:"name-id",label:"Name",children:Object(M.jsx)(S.a,{disabled:e.isEditing,id:"name-id",name:"name"})}),Object(M.jsx)(se.a,{name:"category",htmlFor:"category-id",label:"category",children:Object(M.jsx)(Y.a,{disabled:e.isEditing,name:"category",options:["2x2","3x3","4x4","5x5","6x6","7x7","8x8","MxN","NxN","other"]})}),Object(M.jsx)(se.a,{name:"description",htmlFor:"description-id",label:"Description",children:Object(M.jsx)(Te.a,{name:"description"})}),Object(M.jsx)(se.a,{name:"price",htmlFor:"price-id",label:"Price",validate:function(e,t){if(!/^[0-9]+(.[0-9]{1,2})?$/.test(t.price))return"Price must match NN...N.NN"},children:Object(M.jsx)(S.a,{id:"price-id",name:"price"})}),Object(M.jsx)(se.a,{name:"pictureurl",htmlFor:"pictureurl-id",label:"Picture URL",children:Object(M.jsx)(S.a,{id:"pictureurl-id",name:"pictureurl",placeholder:"Write new image URL"})}),Object(M.jsx)(x.a,{pad:{horizontal:"large"},children:Object(M.jsx)(C.a,{primary:!0,type:"submit",label:"Save"})})]})};var Ee=function(){var e=Object(s.i)().itemcode,t=Object(s.g)(),a=Object(n.useState)({}),r=Object(l.a)(a,2),i=r[0],c=r[1],o=Object(n.useMemo)((function(){return new O}),[]),u=p;return Object(n.useEffect)((function(){"new"!==e&&o.fetchItemByCode((function(e){c(e)}),(function(e){"uilogout"===e.error&&(u.logout(),t.push("/login?logoutreason=tokenexpired"))}),e)}),[o,e]),Object(M.jsxs)(q,{title:"Edit Item",children:[Object(M.jsxs)(w.a,{level:2,children:["Editing item '",e,"'"]}),Object(M.jsx)(Be,{data:i,onChange:function(e){return c(e)},onSubmit:function(e){o.updateItem((function(e){t.push("/adminitems")}),(function(e){"uilogout"===e.error&&(u.logout(),t.push("/login?logoutreason=tokenexpired"))}),e)},isEditing:!0})]})},Le=a(377);var Me=function(){return Object(M.jsxs)(q,{title:"Ooooooops!",children:[Object(M.jsx)(w.a,{level:2,margin:{horizontal:"auto"},children:"Forbidden Resource"}),Object(M.jsxs)(x.a,{fill:"horizontal",align:"center",children:[Object(M.jsx)(Le.a,{size:"xlarge",margin:{horizontal:"auto"}}),Object(M.jsxs)(v.a,{size:"large",children:["You don't have access to the requested resource. Please ",Object(M.jsx)(k.a,{href:"/#/login",children:"Log in"})," correctly."]})]})]})};var Ae=function(){return Object(M.jsxs)(q,{title:"Ooooooops!",children:[Object(M.jsx)(w.a,{level:2,margin:{horizontal:"auto"},children:"404 Not found!"}),Object(M.jsxs)(x.a,{fill:"horizontal",align:"center",children:[Object(M.jsx)(U.a,{size:"xlarge",margin:{horizontal:"auto"}}),Object(M.jsx)(v.a,{size:"large",children:"We didn't found the resource. Maybe you followed a broken link?"})]})]})};var qe=function(){Object(s.i)().itemcode;var e=Object(s.g)(),t=Object(n.useState)({}),a=Object(l.a)(t,2),r=a[0],i=a[1],c=Object(n.useMemo)((function(){return new O}),[]),o=p;return Object(M.jsxs)(q,{title:"New Item",children:[Object(M.jsx)(w.a,{level:2,children:"New Item"}),Object(M.jsx)(Be,{data:r,onChange:function(e){return i(e)},onSubmit:function(t){c.saveItem((function(t){e.push("/adminitems")}),(function(t){"uilogout"===t.error&&(o.logout(),e.push("/login?logoutreason=tokenexpired"))}),t)},isEditing:!1})]})};var De=function(){return Object(M.jsx)(o.a,{children:Object(M.jsxs)(s.d,{children:[Object(M.jsxs)(s.b,{exact:!0,path:"/",children:[p.isAdmin()&&Object(M.jsx)(s.a,{to:"/adminorders"}),!p.isAdmin()&&Object(M.jsx)(V,{})]}),Object(M.jsx)(s.b,{exact:!0,path:"/cart",children:Object(M.jsx)(ae,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/checkout",children:Object(M.jsx)(ie,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/profile",children:Object(M.jsx)(ce,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/login",children:Object(M.jsx)(je,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/adminusers",children:Object(M.jsx)(we,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/adminusers/:username",children:Object(M.jsx)(Pe,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/adminorders",children:Object(M.jsx)(Ce,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/adminorders/:ordercode",children:Object(M.jsx)(Ne,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/adminitems",children:Object(M.jsx)(ze,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/adminitems/new",children:Object(M.jsx)(qe,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/adminitems/:itemcode",children:Object(M.jsx)(Ee,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/403",children:Object(M.jsx)(Me,{})}),Object(M.jsx)(s.b,{exact:!0,path:"/404",children:Object(M.jsx)(Ae,{})})]})})};c.a.render(Object(M.jsx)(r.a.StrictMode,{children:Object(M.jsx)(De,{})}),document.getElementById("root"))}},[[324,1,2]]]);
//# sourceMappingURL=main.f0747925.chunk.js.map